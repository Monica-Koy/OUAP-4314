"""
macro: render_form
return: form with fields and labels
parameters:
	- title: for the h4 title of the form
	- action_url: redirection to the view route and function specific to the form
	- hidden_tag: CSRF protection
	- search: search SubmitField specific to the form
	- list_label_field: a list of the labels and the actual StringFields of each field


macro: render_table
return: table of entries, URLs and redirections of a list of documents
parameters: 
	- list_document: list of documents based on their IDs (see views.py: author_id, series_id)
	- header: list with the table's header strings
	- keys: list of the keys (fields) to display for a document in list_document
	- redirect: list of the Flask redirects and/or external URLs, where each element is a list of length 3:
		1) route name
		2) route argument (an ID)
		3) name of the link (the name of the author, series or comic)
	But when dealing with a regular URL, only elements 2) and 3) are required:
		2) URL
		3) name of the link
	The macro knows itself if it's a redirection or a regular URL using a if/else statement.


macro: render_card
return: card with all the current author or series informations
parameters: single document
"""


{% macro render_form(title, action_url, hidden_tag, search, list_label_field) -%}

    <h4 class="pink-text">{{ title }}</h4>
    <form action="{{ action_url }}" method="post" autocomplete="off" autofocus="autofocus" class="col s12">
    {{ hidden_tag }}
    <table>
    <tr>
        {% for x in list_label_field %}
        <td class="col s6">{{ x[0] }} {{ x[1] }}</td>
        {% endfor %}
    </tr>

    </table>
    <button class="btn waves-effect waves-light center"> {{ search }}
    </form>

{%- endmacro %}



{% macro render_table(list_document, header, keys, redirect) -%}

	<table class="highlight">
		<thead>
			<tr>
				{% for x in header %}
				<th>{{ x }}</th>		
				{% endfor %}
			</tr>
		</thead>

		<tbody>

			{% for x in list_document %}
			<tr>
				{% for z in redirect %}
				{% set id = x[z[1]] %}

				{% if id.startswith("http") %}

				<td><a href="{{ x[z[1]] }}">{{ x[z[2]] }}</a></td>

				{% else %}

				<td><a href="/{{ z[0] }}/{{ x[z[1]] }}">{{ x[z[2]] }}</a></td>

				{% endif %}

				{% endfor %}

				{% for y in keys %}
				<td>{{ x[y] }}</td>
				{% endfor %}
			</tr>
			{% endfor %}

		</tbody>

	</table>

{%- endmacro %}

{% macro render_card(document) -%}

	<div class="card blue-grey darken-1">
	<div class="card-content white-text">
		{% for key, value in document.items() %}
			{{ key }}: {{ value }}<br>
		{% endfor %}
	</div>
	</div>

{%- endmacro %}



